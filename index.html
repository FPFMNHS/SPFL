

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Build it Up! - Korean Vocabulary Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f0f9ff;
        }
        .card {
            perspective: 1000px;
            transition: transform 0.6s;
        }
        .card-inner {
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }
        .card-front, .card-back {
            backface-visibility: hidden;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .card-back {
            transform: rotateY(180deg);
        }
        .image-placeholder {
            background-color: #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100px;
            border-radius: 0.5rem;
        }
        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }
        .bounce {
            animation: bounce 1s infinite;
        }
        .progress-bar {
            transition: width 0.5s ease-in-out;
        }
        .quiz-option:hover {
            background-color: #e0f2fe;
        }
        .quiz-option.selected {
            background-color: #bfdbfe;
            border-color: #3b82f6;
        }
        .quiz-option.correct {
            background-color: #d1fae5;
            border-color: #10b981;
        }
        .quiz-option.incorrect {
            background-color: #fee2e2;
            border-color: #ef4444;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .english-section {
            background-color: #dbeafe;
            border-left: 5px solid #3b82f6;
        }
        .korean-section {
            background-color: #ede9fe;
            border-left: 5px solid #8b5cf6;
        }
        .english-card .card-front {
            background: linear-gradient(135deg, #3b82f6, #1e40af);
        }
        .korean-card .card-front {
            background: linear-gradient(135deg, #8b5cf6, #5b21b6);
        }
        .login-container {
            background: linear-gradient(135deg, #dbeafe, #ede9fe);
        }
        .input-field:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
        }
        .error-message {
            color: #ef4444;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
        .audio-btn {
            cursor: pointer;
            transition: transform 0.2s;
        }
        .audio-btn:hover {
            transform: scale(1.2);
        }
        .audio-btn:active {
            transform: scale(0.95);
        }
        .audio-playing {
            animation: pulse 1s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.6; }
            100% { opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="min-h-screen flex flex-col">
        <!-- Login Screen -->
        <div id="login-screen" class="fixed inset-0 bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center z-50">
            <div class="login-container bg-white rounded-lg p-8 max-w-md w-full shadow-2xl">
                <div class="text-center mb-6">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto text-blue-600 mb-4" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838l-2.727 1.17 1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"/>
                    </svg>
                    <h2 class="text-3xl font-bold text-gray-800 mb-2">Welcome to Build it Up!</h2>
                    <p class="text-gray-600 mb-6">Korean Vocabulary Game</p>
                </div>
                
                <form id="login-form" class="space-y-6">
                    <div>
                        <label for="full-name" class="block text-gray-700 font-semibold mb-2">Full Name</label>
                        <input type="text" id="full-name" class="input-field w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:outline-none transition-colors" placeholder="Enter your full name">
                        <div id="name-error" class="error-message hidden">Please enter your full name</div>
                    </div>
                    
                    <div>
                        <label for="grade-level" class="block text-gray-700 font-semibold mb-2">Grade Level</label>
                        <select id="grade-level" class="input-field w-full px-4 py-3 rounded-lg border-2 border-gray-300 focus:outline-none transition-colors">
                            <option value="">Select your grade</option>
                            <option value="Grade 1">Grade 1</option>
                            <option value="Grade 2">Grade 2</option>
                            <option value="Grade 3">Grade 3</option>
                            <option value="Grade 4">Grade 4</option>
                            <option value="Grade 5">Grade 5</option>
                            <option value="Grade 6">Grade 6</option>
                            <option value="Grade 7">Grade 7</option>
                            <option value="Grade 8">Grade 8</option>
                            <option value="Grade 9">Grade 9</option>
                            <option value="Grade 10">Grade 10</option>
                            <option value="Grade 11">Grade 11</option>
                            <option value="Grade 12">Grade 12</option>
                        </select>
                        <div id="grade-error" class="error-message hidden">Please select your grade level</div>
                    </div>
                    
                    <button type="submit" class="w-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300">
                        Start Game
                    </button>
                </form>
            </div>
        </div>

        <!-- Header -->
        <header class="bg-gradient-to-r from-blue-500 to-purple-600 text-white py-4 px-6 shadow-lg">
            <div class="container mx-auto flex flex-col md:flex-row md:justify-between md:items-center">
                <div class="flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 mr-3" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838l-2.727 1.17 1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"/>
                    </svg>
                    <h1 class="text-3xl font-bold">Build it Up!</h1>
                </div>
                <div class="flex flex-col md:flex-row md:items-center mt-2 md:mt-0">
                    <div class="text-lg font-semibold mr-4">Korean Vocabulary Game</div>
                    <div id="student-info" class="bg-white bg-opacity-20 px-4 py-1 rounded-full text-sm font-medium hidden">
                        Student: <span id="header-student-name">Name</span> | <span id="header-grade-level">Grade</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="flex-grow container mx-auto px-4 py-8">
            <!-- Game Instructions -->
            <div id="game-instructions" class="mb-8 bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold text-gray-800 mb-3">How to Play</h2>
                <p class="text-gray-700">Match the Korean words with their English meanings! Click on a card from the English section, then find its matching pair in the Korean section. Complete all matches to unlock the quiz!</p>
                
                <div class="mt-4 flex items-center">
                    <div class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full font-semibold mr-2">Tip:</div>
                    <p class="text-gray-700">Click the sound icon <span class="inline-block">🔊</span> to hear the pronunciation.</p>
                </div>
            </div>

            <!-- Progress Bar -->
            <div class="mb-6">
                <div class="flex justify-between mb-2">
                    <span class="text-gray-700 font-semibold">Progress:</span>
                    <span class="text-gray-700 font-semibold" id="progress-text">0/14</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-4">
                    <div class="bg-gradient-to-r from-green-400 to-blue-500 h-4 rounded-full progress-bar" style="width: 0%"></div>
                </div>
            </div>

            <!-- Game Board -->
            <div id="game-container">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- English Section -->
                    <div class="english-section p-4 rounded-lg shadow-md">
                        <div class="flex items-center mb-4">
                            <div class="w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold mr-2">E</div>
                            <h2 class="text-xl font-bold text-blue-800">English Words</h2>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="english-board">
                            <!-- English cards will be generated here -->
                        </div>
                    </div>
                    
                    <!-- Korean Section -->
                    <div class="korean-section p-4 rounded-lg shadow-md">
                        <div class="flex items-center mb-4">
                            <div class="w-8 h-8 rounded-full bg-purple-500 flex items-center justify-center text-white font-bold mr-2">한</div>
                            <h2 class="text-xl font-bold text-purple-800">Korean Words</h2>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="korean-board">
                            <!-- Korean cards will be generated here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quiz Container (Initially Hidden) -->
            <div id="quiz-container" class="hidden">
                <div class="bg-white p-6 rounded-lg shadow-md mb-6">
                    <h2 class="text-2xl font-bold text-gray-800 mb-3">Korean Vocabulary Quiz</h2>
                    <p class="text-gray-700 mb-4">Test your knowledge! Choose the correct answer for each question.</p>
                    
                    <div class="flex justify-between mb-2">
                        <span class="text-gray-700 font-semibold">Quiz Progress:</span>
                        <span class="text-gray-700 font-semibold" id="quiz-progress">Question 1/10</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-4 mb-6">
                        <div class="bg-gradient-to-r from-yellow-400 to-orange-500 h-4 rounded-full" id="quiz-progress-bar" style="width: 10%"></div>
                    </div>
                </div>

                <div id="quiz-question" class="bg-white p-6 rounded-lg shadow-md mb-6">
                    <!-- Quiz questions will be generated here -->
                </div>

                <div class="flex justify-end">
                    <button id="next-question" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg transition duration-300 hidden">
                        Next Question
                    </button>
                </div>
            </div>

            <!-- Results Modal -->
            <div id="results-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                <div class="bg-white rounded-lg p-8 max-w-md w-full shadow-2xl">
                    <div class="text-center">
                        <div class="inline-block p-4 rounded-full bg-green-100 mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                        <h2 class="text-3xl font-bold text-gray-800 mb-2">Congratulations!</h2>
                        <p class="text-gray-600 mb-6">You've completed all the matches!</p>
                        <div class="flex justify-center">
                            <button id="start-quiz" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300">
                                Start Quiz
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quiz Results Modal -->
            <div id="quiz-results-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                <div class="bg-white rounded-lg p-8 max-w-md w-full shadow-2xl">
                    <div class="text-center">
                        <div class="inline-block p-4 rounded-full bg-blue-100 mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                        <h2 class="text-3xl font-bold text-gray-800 mb-2">Quiz Complete!</h2>
                        
                        <div class="bg-blue-50 rounded-lg p-4 mb-4">
                            <p class="text-gray-700 mb-1">Student: <span id="result-student-name" class="font-semibold">Name</span></p>
                            <p class="text-gray-700">Grade: <span id="result-grade-level" class="font-semibold">Grade</span></p>
                        </div>
                        
                        <p class="text-gray-600 mb-2">Your score:</p>
                        <p class="text-4xl font-bold text-blue-600 mb-6" id="final-score">0/10</p>
                        
                        <div class="flex justify-center">
                            <button id="play-again" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300">
                                Play Again
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="bg-gray-800 text-white py-4 px-6">
            <div class="container mx-auto text-center">
                <p>Build it Up! - Korean Vocabulary Game for Grade 7</p>
            </div>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Student information
            let studentName = "";
            let gradeLevel = "";
            
            // Login form handling
            const loginForm = document.getElementById('login-form');
            loginForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const nameInput = document.getElementById('full-name');
                const gradeInput = document.getElementById('grade-level');
                const nameError = document.getElementById('name-error');
                const gradeError = document.getElementById('grade-error');
                
                // Reset error messages
                nameError.classList.add('hidden');
                gradeError.classList.add('hidden');
                
                // Validate inputs
                let isValid = true;
                
                if (!nameInput.value.trim()) {
                    nameError.classList.remove('hidden');
                    isValid = false;
                }
                
                if (!gradeInput.value) {
                    gradeError.classList.remove('hidden');
                    isValid = false;
                }
                
                if (isValid) {
                    // Store student information
                    studentName = nameInput.value.trim();
                    gradeLevel = gradeInput.value;
                    
                    // Update header with student info
                    document.getElementById('header-student-name').textContent = studentName;
                    document.getElementById('header-grade-level').textContent = gradeLevel;
                    document.getElementById('student-info').classList.remove('hidden');
                    
                    // Hide login screen
                    document.getElementById('login-screen').classList.add('hidden');
                    
                    // Initialize the game
                    initializeGame();
                }
            });
            
            function initializeGame() {
                // Korean vocabulary with romanization
                const vocabulary = [
                    { english: "School", korean: "학교", romanization: "Hakgyo" },
                    { english: "Teacher", korean: "선생님", romanization: "Seonsaengnim" },
                    { english: "Student", korean: "학생", romanization: "Haksaeng" },
                    { english: "Pencil", korean: "연필", romanization: "Yeonpil" },
                    { english: "Mathematics", korean: "수학", romanization: "Suhak" },
                    { english: "Science", korean: "과학", romanization: "Gwahak" },
                    { english: "English", korean: "영어", romanization: "Yeong-eo" },
                    { english: "Graduation", korean: "졸업", romanization: "Jol-eop" },
                    { english: "Apples", korean: "사과", romanization: "Sagwa" },
                    { english: "Meat", korean: "고기", romanization: "Gogi" },
                    { english: "Water", korean: "물", romanization: "Mul" },
                    { english: "Fruit", korean: "과일", romanization: "Gwail" },
                    { english: "Bread", korean: "빵", romanization: "Ppang" },
                    { english: "Vegetables", korean: "채소", romanization: "Chaeso" }
                ];

                // Preload audio files
                const audioFiles = {};
                
                // OPTION 1: Preload audio files based on English words
                vocabulary.forEach(item => {
                    // Convert to lowercase and replace spaces with underscores for filenames
                    const audioKey = item.english.toLowerCase().replace(/\s+/g, '_');
                    audioFiles[item.english] = new Audio(`audio/${audioKey}.mp3`);
                    
                    // Add error handling for audio loading
                    audioFiles[item.english].onerror = function() {
                        console.error(`Error loading audio file for: ${item.english}`);
                    };
                });
                
                /* 
                // OPTION 2: Preload audio files based on Korean words
                vocabulary.forEach(item => {
                    audioFiles[item.korean] = new Audio(`audio/${item.korean}.mp3`);
                    
                    // Add error handling for audio loading
                    audioFiles[item.korean].onerror = function() {
                        console.error(`Error loading audio file for: ${item.korean}`);
                    };
                });
                
                // OPTION 3: Preload audio files based on romanization
                vocabulary.forEach(item => {
                    const audioKey = item.romanization.toLowerCase().replace(/\s+/g, '_').replace(/-/g, '_');
                    audioFiles[item.english] = new Audio(`audio/${audioKey}.mp3`);
                    
                    // Add error handling for audio loading
                    audioFiles[item.english].onerror = function() {
                        console.error(`Error loading audio file for: ${item.romanization}`);
                    };
                });
                */

                // Function to play audio with visual feedback
                function playAudio(word) {
                    // Find all audio buttons for this word and add visual feedback
                    const audioButtons = document.querySelectorAll(`[data-word="${word}"]`);
                    
                    // Play the audio
                    if (audioFiles[word]) {
                        // Reset the audio to the beginning if it's already playing
                        audioFiles[word].currentTime = 0;
                        
                        // Add visual feedback when playing
                        audioButtons.forEach(btn => btn.classList.add('audio-playing'));
                        
                        // Play the audio
                        audioFiles[word].play()
                            .then(() => {
                                // Audio played successfully
                            })
                            .catch(error => {
                                console.error('Error playing audio:', error);
                            });
                        
                        // Remove visual feedback when audio ends
                        audioFiles[word].onended = function() {
                            audioButtons.forEach(btn => btn.classList.remove('audio-playing'));
                        };
                    } else {
                        console.error(`Audio not found for: ${word}`);
                    }
                }

                // Game state
                let selectedCard = null;
                let lockBoard = false;
                let matchedPairs = 0;
                const totalPairs = vocabulary.length;
                
                // Quiz state
                let currentQuestionIndex = 0;
                let quizScore = 0;
                let quizQuestions = [];
                
                // Create cards
                const englishBoard = document.getElementById('english-board');
                const koreanBoard = document.getElementById('korean-board');
                
                vocabulary.forEach((item, index) => {
                    // Create English card
                    const englishCard = createCard(item, 'english', index);
                    englishBoard.appendChild(englishCard);
                    
                    // Create Korean card
                    const koreanCard = createCard(item, 'korean', index);
                    koreanBoard.appendChild(koreanCard);
                });
                
                // Shuffle cards in each section
                shuffleCards(englishBoard);
                shuffleCards(koreanBoard);
                
                function shuffleCards(board) {
                    const cards = Array.from(board.children);
                    cards.sort(() => Math.random() - 0.5);
                    cards.forEach(card => board.appendChild(card));
                }
                
                function createCard(item, type, index) {
                    const card = document.createElement('div');
                    card.className = `card relative h-64 rounded-lg shadow-md cursor-pointer ${type}-card`;
                    card.dataset.index = index;
                    card.dataset.type = type;
                    
                    const cardInner = document.createElement('div');
                    cardInner.className = 'card-inner w-full h-full';
                    
                    // Front of card
                    const cardFront = document.createElement('div');
                    cardFront.className = 'card-front rounded-lg flex items-center justify-center w-full h-full';
                    
                    const frontContent = document.createElement('div');
                    frontContent.className = 'text-white text-2xl font-bold';
                    frontContent.textContent = 'Build it Up!';
                    
                    cardFront.appendChild(frontContent);
                    
                    // Back of card
                    const cardBack = document.createElement('div');
                    cardBack.className = 'card-back bg-white rounded-lg p-4 flex flex-col items-center justify-between w-full h-full';
                    
                    const cardContent = document.createElement('div');
                    cardContent.className = 'flex flex-col items-center w-full';
                    
                    if (type === 'korean') {
                        // Korean word card
                        const koreanText = document.createElement('h3');
                        koreanText.className = 'text-3xl font-bold text-purple-800 mb-2';
                        koreanText.textContent = item.korean;
                        
                        const romanization = document.createElement('p');
                        romanization.className = 'text-gray-600 mb-3';
                        romanization.textContent = item.romanization;
                        
                        const audioButton = document.createElement('button');
                        audioButton.className = 'audio-btn text-2xl mb-3';
                        audioButton.innerHTML = '🔊';
                        audioButton.title = 'Play pronunciation';
                        audioButton.dataset.word = item.english; // Use English as the key to find audio
                        audioButton.onclick = function(e) {
                            e.stopPropagation();
                            playAudio(item.english);
                        };
                        
                        const imagePlaceholder = document.createElement('div');
                        imagePlaceholder.className = 'image-placeholder w-full mt-2';
                        imagePlaceholder.innerHTML = `
                            <div class="text-gray-400 text-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mx-auto mb-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                </svg>
                                <p class="text-sm">Image for ${item.english}</p>
                            </div>
                        `;
                        
                        cardContent.appendChild(koreanText);
                        cardContent.appendChild(romanization);
                        cardContent.appendChild(audioButton);
                        cardContent.appendChild(imagePlaceholder);
                    } else {
                        // English word card
                        const englishText = document.createElement('h3');
                        englishText.className = 'text-2xl font-bold text-blue-800 mb-2';
                        englishText.textContent = item.english;
                        
                        const imagePlaceholder = document.createElement('div');
                        imagePlaceholder.className = 'image-placeholder w-full mt-2';
                        imagePlaceholder.innerHTML = `
                            <div class="text-gray-400 text-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mx-auto mb-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                </svg>
                                <p class="text-sm">Image for ${item.english}</p>
                            </div>
                        `;
                        
                        cardContent.appendChild(englishText);
                        cardContent.appendChild(imagePlaceholder);
                    }
                    
                    cardBack.appendChild(cardContent);
                    
                    cardInner.appendChild(cardFront);
                    cardInner.appendChild(cardBack);
                    card.appendChild(cardInner);
                    
                    card.addEventListener('click', flipCard);
                    
                    return card;
                }
                
                function flipCard() {
                    if (lockBoard) return;
                    if (this === selectedCard) return;
                    
                    this.classList.add('flipped');
                    
                    if (!selectedCard) {
                        // First card flipped
                        selectedCard = this;
                        return;
                    }
                    
                    // Second card flipped
                    const firstCardIndex = selectedCard.dataset.index;
                    const secondCardIndex = this.dataset.index;
                    const firstCardType = selectedCard.dataset.type;
                    const secondCardType = this.dataset.type;
                    
                    if (firstCardIndex === secondCardIndex && firstCardType !== secondCardType) {
                        // Match found
                        disableCards();
                        updateProgress();
                        
                        // Play audio for the matched word
                        const matchedWord = vocabulary[parseInt(firstCardIndex)].english;
                        setTimeout(() => playAudio(matchedWord), 500);
                    } else {
                        // No match
                        unflipCards(this);
                    }
                }
                
                function disableCards() {
                    selectedCard.removeEventListener('click', flipCard);
                    selectedCard.classList.add('bg-green-100');
                    selectedCard = null;
                    
                    matchedPairs++;
                    
                    if (matchedPairs === totalPairs) {
                        setTimeout(() => {
                            document.getElementById('results-modal').classList.remove('hidden');
                            prepareQuiz();
                        }, 1000);
                    }
                }
                
                function unflipCards(currentCard) {
                    lockBoard = true;
                    
                    setTimeout(() => {
                        selectedCard.classList.remove('flipped');
                        currentCard.classList.remove('flipped');
                        selectedCard = null;
                        lockBoard = false;
                    }, 1500);
                }
                
                function updateProgress() {
                    const progressBar = document.querySelector('.progress-bar');
                    const progressText = document.getElementById('progress-text');
                    const percentage = (matchedPairs / totalPairs) * 100;
                    
                    progressBar.style.width = `${percentage}%`;
                    progressText.textContent = `${matchedPairs}/${totalPairs}`;
                }
                
                // Quiz functionality
                function prepareQuiz() {
                    // Create 10 quiz questions
                    quizQuestions = createQuizQuestions();
                }
                
                function createQuizQuestions() {
                    const questions = [];
                    const usedIndices = new Set();
                    
                    // Create 10 unique questions
                    while (questions.length < 10) {
                        const questionType = Math.random() > 0.5 ? 'korean-to-english' : 'english-to-korean';
                        const correctIndex = Math.floor(Math.random() * vocabulary.length);
                        
                        // Ensure we don't repeat the same word
                        if (usedIndices.has(correctIndex)) continue;
                        usedIndices.add(correctIndex);
                        
                        const correctItem = vocabulary[correctIndex];
                        
                        // Generate 3 wrong options
                        const wrongOptions = [];
                        while (wrongOptions.length < 3) {
                            const wrongIndex = Math.floor(Math.random() * vocabulary.length);
                            if (wrongIndex !== correctIndex && !wrongOptions.includes(vocabulary[wrongIndex])) {
                                wrongOptions.push(vocabulary[wrongIndex]);
                            }
                        }
                        
                        // Create options array with correct answer and wrong options
                        const options = [...wrongOptions, correctItem];
                        // Shuffle options
                        options.sort(() => Math.random() - 0.5);
                        
                        questions.push({
                            type: questionType,
                            correctItem: correctItem,
                            options: options
                        });
                    }
                    
                    return questions;
                }
                
                function displayQuestion(index) {
                    const question = quizQuestions[index];
                    const quizQuestionElement = document.getElementById('quiz-question');
                    
                    // Update progress
                    document.getElementById('quiz-progress').textContent = `Question ${index + 1}/10`;
                    document.getElementById('quiz-progress-bar').style.width = `${(index + 1) * 10}%`;
                    
                    // Clear previous question
                    quizQuestionElement.innerHTML = '';
                    
                    // Create question header
                    const questionHeader = document.createElement('div');
                    questionHeader.className = 'mb-6';
                    
                    if (question.type === 'korean-to-english') {
                        questionHeader.innerHTML = `
                            <h3 class="text-xl font-bold text-gray-800 mb-2">What does this Korean word mean?</h3>
                            <div class="flex items-center">
                                <div class="text-3xl font-bold text-purple-600 mr-3">${question.correctItem.korean}</div>
                                <div class="text-gray-600">(${question.correctItem.romanization})</div>
                                <button class="audio-btn text-2xl ml-3" id="quiz-audio-btn" data-word="${question.correctItem.english}">🔊</button>
                            </div>
                            <div class="image-placeholder w-full max-w-xs mt-4 mx-auto">
                                <div class="text-gray-400 text-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 mx-auto mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                    </svg>
                                    <p>Image for ${question.correctItem.english}</p>
                                </div>
                            </div>
                        `;
                    } else {
                        questionHeader.innerHTML = `
                            <h3 class="text-xl font-bold text-gray-800 mb-2">What is the Korean word for this?</h3>
                            <div class="text-3xl font-bold text-blue-600">${question.correctItem.english}</div>
                            <div class="image-placeholder w-full max-w-xs mt-4 mx-auto">
                                <div class="text-gray-400 text-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 mx-auto mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                    </svg>
                                    <p>Image for ${question.correctItem.english}</p>
                                </div>
                            </div>
                        `;
                    }
                    
                    quizQuestionElement.appendChild(questionHeader);
                    
                    // Create options
                    const optionsContainer = document.createElement('div');
                    optionsContainer.className = 'grid grid-cols-1 md:grid-cols-2 gap-4 mt-6';
                    
                    question.options.forEach((option, optionIndex) => {
                        const optionElement = document.createElement('div');
                        optionElement.className = 'quiz-option border-2 border-gray-200 rounded-lg p-4 cursor-pointer hover:border-blue-400 transition-colors';
                        optionElement.dataset.index = optionIndex;
                        
                        if (question.type === 'korean-to-english') {
                            optionElement.textContent = option.english;
                        } else {
                            optionElement.innerHTML = `
                                <div class="font-bold">${option.korean}</div>
                                <div class="text-sm text-gray-600">${option.romanization}</div>
                            `;
                        }
                        
                        optionElement.addEventListener('click', function() {
                            if (document.getElementById('next-question').classList.contains('hidden')) {
                                selectAnswer(this, question, option);
                            }
                        });
                        
                        optionsContainer.appendChild(optionElement);
                    });
                    
                    quizQuestionElement.appendChild(optionsContainer);
                    
                    // Add audio button functionality
                    const quizAudioBtn = document.getElementById('quiz-audio-btn');
                    if (quizAudioBtn) {
                        quizAudioBtn.addEventListener('click', function() {
                            const word = this.dataset.word;
                            playAudio(word);
                        });
                    }
                }
                
                function selectAnswer(optionElement, question, selectedOption) {
                    // Remove selected class from all options
                    const options = document.querySelectorAll('.quiz-option');
                    options.forEach(opt => opt.classList.remove('selected'));
                    
                    // Add selected class to clicked option
                    optionElement.classList.add('selected');
                    
                    // Check if answer is correct
                    const isCorrect = selectedOption === question.correctItem;
                    
                    // Show correct/incorrect feedback
                    options.forEach(opt => {
                        const optionIndex = parseInt(opt.dataset.index);
                        const option = question.options[optionIndex];
                        
                        if (option === question.correctItem) {
                            opt.classList.add('correct');
                        } else if (opt === optionElement && !isCorrect) {
                            opt.classList.add('incorrect');
                        }
                    });
                    
                    // Update score if correct
                    if (isCorrect) {
                        quizScore++;
                        // Play audio for correct answer
                        playAudio(question.correctItem.english);
                    }
                    
                    // Show next button
                    document.getElementById('next-question').classList.remove('hidden');
                }
                
                function nextQuestion() {
                    currentQuestionIndex++;
                    
                    if (currentQuestionIndex < 10) {
                        // Show next question
                        displayQuestion(currentQuestionIndex);
                        // Hide next button
                        document.getElementById('next-question').classList.add('hidden');
                    } else {
                        // Show quiz results
                        showQuizResults();
                    }
                }
                
                function showQuizResults() {
                    // Update student info in results
                    document.getElementById('result-student-name').textContent = studentName;
                    document.getElementById('result-grade-level').textContent = gradeLevel;
                    document.getElementById('final-score').textContent = `${quizScore}/10`;
                    
                    // Show results modal
                    document.getElementById('quiz-results-modal').classList.remove('hidden');
                }
                
                // Event listeners
                document.getElementById('start-quiz').addEventListener('click', function() {
                    document.getElementById('results-modal').classList.add('hidden');
                    document.getElementById('game-container').classList.add('hidden');
                    document.getElementById('game-instructions').classList.add('hidden');
                    document.getElementById('quiz-container').classList.remove('hidden');
                    
                    // Start quiz
                    currentQuestionIndex = 0;
                    quizScore = 0;
                    displayQuestion(currentQuestionIndex);
                });
                
                document.getElementById('next-question').addEventListener('click', nextQuestion);
                
                document.getElementById('play-again').addEventListener('click', function() {
                    document.getElementById('quiz-results-modal').classList.add('hidden');
                    document.getElementById('quiz-container').classList.add('hidden');
                    document.getElementById('game-container').classList.remove('hidden');
                    document.getElementById('game-instructions').classList.remove('hidden');
                    resetGame();
                });
                
                function resetGame() {
                    // Reset game state
                    selectedCard = null;
                    lockBoard = false;
                    matchedPairs = 0;
                    
                    // Reset progress
                    updateProgress();
                    
                    // Reset all cards
                    const englishCards = Array.from(englishBoard.children);
                    const koreanCards = Array.from(koreanBoard.children);
                    
                    [...englishCards, ...koreanCards].forEach(card => {
                        card.classList.remove('flipped', 'bg-green-100');
                        card.addEventListener('click', flipCard);
                    });
                    
                    // Shuffle cards in each section
                    shuffleCards(englishBoard);
                    shuffleCards(koreanBoard);
                }
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'962b494fa5bdbc40',t:'MTc1MzEwNzA3NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
